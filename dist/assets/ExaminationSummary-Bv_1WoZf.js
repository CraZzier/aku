import{d as E,r as i,f as v,u as L,g as N,h as V,i as j,l as u,j as o,o as s,m as c,I as D,n as G,p as O,q,s as F,t as H,a,Q as l,x as K,c as n,T as x,U as _,W as m,C as M}from"./index-zrZiwRKi.js";const P={style:{"padding-left":"10px"}},Q={key:0,style:{"font-size":"14px","margin-left":"6px"}},R={style:{"padding-left":"10px"}},U={key:0,style:{"font-size":"14px","margin-left":"6px"}},W={key:1,style:{"font-size":"14px","margin-left":"6px"}},A={style:{"padding-left":"10px"}},J={style:{"font-size":"14px","margin-left":"6px"}},X={style:{"padding-left":"10px"}},Y={key:0,style:{"font-size":"14px","margin-left":"6px"}},Z={key:1,style:{"font-size":"14px","margin-left":"6px"}},$={style:{"padding-left":"10px"}},ee={style:{"font-size":"14px","margin-left":"6px"}},te=["src"],ne=E({__name:"ExaminationSummary",setup(se){const h=i(""),k=i(""),I=i(),r=V(),w=i(void 0),f=i(void 0),p=i();let C=v([]),z=v([]),B=v([]);const y=L(),T=i(null),d=new Image;d.src="/puls.jpg",N(async()=>{var g;if(console.log(r.params.examinationId,r.params.userId),console.log(y.users),r.params.examinationId&&r.params.userId){const t=y.users.find(e=>e.id===r.params.userId);if(console.log(t,y.users),t){console.log(t);const e=(g=t.examinations)==null?void 0:g.find(S=>S.id===r.params.examinationId);e&&(console.log(e),h.value=e.diagnosis,C=e.symptoms,z=e.muscleTests,I.value=e.pulseImage,d.src=await b(I.value)||"/puls.jpg",B=e.treatments,k.value=e.notes,f.value=e.notesImage)}}if(!p.value){console.error("Canvas element is not available");return}T.value=p.value.getContext("2d"),d.onload=()=>{p.value.width=d.width,p.value.height=d.height,T.value.drawImage(d,0,0)},f.value&&(w.value=await b(f.value)||void 0)});const b=async g=>{try{return(await(await fetch("https://akupunkturaigla.pl/api/sync/image/download?key="+g,{method:"GET",headers:{"Content-Type":"application/json"}})).json()).content}catch(t){return console.error("Error downloading photo:",t),null}};return(g,t)=>(s(),j(o(M),null,{default:u(()=>[c(o(D),null,{default:u(()=>[c(o(G),null,{default:u(()=>[c(o(O),{slot:"start"},{default:u(()=>[c(o(q),{ref:"back-button",text:"Cofnij",icon:o(F)},null,8,["icon"])]),_:1})]),_:1})]),_:1}),c(o(H),{class:"ion-padding"},{default:u(()=>[a("div",null,l(),1),c(o(K),{style:{"border-bottom":"solid 1px rgba(0, 0, 0, 0.2)"}},{default:u(()=>[t[0]||(t[0]=a("div",{class:"summary-title"},"Objawy",-1)),(s(!0),n(x,null,_(o(C),e=>(s(),n("div",P,[e.isChecked?(s(),n("span",Q,l(e.name),1)):m("",!0)]))),256)),t[1]||(t[1]=a("div",{class:"summary-title"},"Test mięśniowy",-1)),(s(!0),n(x,null,_(o(z),e=>(s(),n("div",R,[e.isChecked?(s(),n("span",U,l(e.name),1)):m("",!0),e.isChecked?(s(),n("span",W,l(e.result),1)):m("",!0)]))),256)),t[2]||(t[2]=a("div",{class:"summary-title"},"Diagnoza",-1)),a("div",A,[a("span",J,l(h.value),1)]),t[3]||(t[3]=a("div",{class:"summary-title"},"Leczenie",-1)),(s(!0),n(x,null,_(o(B),e=>(s(),n("div",X,[e.isChecked?(s(),n("span",Y,l(e.name),1)):m("",!0),e.isChecked?(s(),n("span",Z,l(e.description),1)):m("",!0)]))),256)),t[4]||(t[4]=a("div",{class:"summary-title"},"Informacja dodatkowe",-1)),a("div",$,[a("span",ee,l(k.value),1)]),a("div",null,[f.value?(s(),n("img",{key:0,src:w.value,style:{width:"100%",height:"auto","margin-top":"10px"}},null,8,te)):m("",!0)]),a("canvas",{ref_key:"canvas",ref:p,style:{border:"1px solid black","margin-top":"10px"}},null,512)]),_:1})]),_:1})]),_:1}))}});export{ne as default};
