import{d as P,u as R,v as x,a as j,x as y,o as q,c as G,w as o,b as e,I as J,e as t,f as I,g as L,h as K,i as Q,j as W,y as b,z as g,A as c,B as X,C as Y,D as B,E as Z,F as D,G as ee,H as m,J as v,l as C,K as te,L as ae,p as w,M as r,N as T,O as oe,P as z,Q as S,R as ne,q as le,s as se,t as p,n as E,S as ie,T as V}from"./index-D0tbHg6R.js";const de={style:{"font-size":"12px","padding-right":"10px"}},re={style:{"font-size":"14px","margin-left":"6px"}},ue={style:{"padding-left":"12px","padding-bottom":"12px"}},ce={style:{"margin-top":"5px","margin-left":"4px"}},fe={key:0,style:{"border-bottom":"1px solid rgba(0,0,0,0.3)",width:"100%",padding:"6px",color:"black"}},pe={key:1,style:{"margin-left":"12px","margin-top":"12px",width:"100%",padding:"6px"}},ve=P({__name:"UserDetails",setup(ge){const h=R(),i=x(()=>h.users.find(l=>l.id===O.params.id)),f=y(""),F=x(()=>{var l,n;return(n=(l=i.value)==null?void 0:l.examinations)==null?void 0:n.filter(a=>a.diagnosis.toLowerCase().includes(u.value.toLowerCase())||a.treatments.some(s=>s.name.toLowerCase().includes(u.value.toLowerCase())&&s.isChecked)||a.treatments.some(s=>s.description.toLowerCase().includes(u.value.toLowerCase())&&s.isChecked)||a.symptoms.some(s=>s.name.toLowerCase().includes(u.value.toLowerCase())&&s.isChecked)||a.notes.toLowerCase().includes(u.value.toLowerCase())||a.date.toLowerCase().includes(u.value.toLowerCase())).sort((a,s)=>f.value===""?0:f.value==="asc"?new Date(a.date).getTime()-new Date(s.date).getTime():f.value==="desc"?new Date(s.date).getTime()-new Date(a.date).getTime():f.value==="diagnosis"?a.diagnosis.localeCompare(s.diagnosis):0)}),_=l=>{if(f.value===l){f.value="";return}f.value=l},O=j(),k=se(),u=y(""),$=l=>{const n={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};return new Date(l).toLocaleDateString("pl-PL",n)};q(async()=>{});const M=()=>{var l;h.removeUser((l=i.value)==null?void 0:l.id),k.push({path:"/"})},N=()=>{var l;k.push({path:"/manageExamination/".concat((l=i.value)==null?void 0:l.id)})};function U(l=15){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let a="";const s=n.length;for(let d=0;d<l;d++)a+=n.charAt(Math.floor(Math.random()*s));return a}const H=l=>{var n;k.push({path:"/manageExamination/".concat((n=i.value)==null?void 0:n.id),query:{examinationId:l}})},A=l=>{var n;h.deleteExamination(l,(n=i.value)==null?void 0:n.id)};return(l,n)=>(p(),G(e(J),null,{default:o(()=>[t(e(W),null,{default:o(()=>[t(e(I),null,{default:o(()=>[t(e(L),{slot:"start"},{default:o(()=>[t(e(K),{text:"Cofnij",icon:e(Q)},null,8,["icon"])]),_:1})]),_:1})]),_:1}),t(e(le),{class:"ion-padding"},{default:o(()=>[t(e(b),{slot:"fixed",vertical:"top",horizontal:"end",edge:!0},{default:o(()=>[t(e(g),{size:"small",color:"dark"},{default:o(()=>[t(e(c),{icon:e(X)},null,8,["icon"])]),_:1}),t(e(Y),{side:"bottom"},{default:o(()=>[t(e(g),{onClick:n[0]||(n[0]=a=>_("asc"))},{default:o(()=>[t(e(c),{icon:e(B)},null,8,["icon"])]),_:1}),t(e(g),{color:"secondary",onClick:n[1]||(n[1]=a=>_("desc"))},{default:o(()=>[t(e(c),{icon:e(B)},null,8,["icon"])]),_:1}),t(e(g),{color:"primary",onClick:n[2]||(n[2]=a=>_("diagnosis"))},{default:o(()=>[t(e(c),{icon:e(Z)},null,8,["icon"])]),_:1}),t(e(g),{color:"danger",onClick:M},{default:o(()=>[t(e(c),{icon:e(D)},null,8,["icon"])]),_:1})]),_:1})]),_:1}),t(e(ee),null,{default:o(()=>[n[6]||(n[6]=m("img",{src:"https://picsum.photos/80/80?random=1",alt:"avatar",height:"80",width:"100%"},null,-1)),t(e(C),{atyle:"overflow:auto"},{default:o(()=>[t(e(te),null,{default:o(()=>[t(e(ae),null,{default:o(()=>{var a,s;return[w(r((a=i.value)==null?void 0:a.name)+" "+r((s=i.value)==null?void 0:s.surname),1)]}),_:1}),t(e(T),null,{default:o(()=>{var a,s;return[w(r((a=i.value)==null?void 0:a.email)+" "+r((s=i.value)==null?void 0:s.phone),1)]}),_:1}),t(e(T),null,{default:o(()=>{var a;return[w(r((a=i.value)==null?void 0:a.age)+" lat",1)]}),_:1})]),_:1})]),_:1}),t(e(C),null,{default:o(()=>[t(e(I),null,{default:o(()=>[t(e(L),null,{default:o(()=>[t(e(oe),{modelValue:u.value,"onUpdate:modelValue":n[3]||(n[3]=a=>u.value=a),placeholder:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(p(!0),v(S,null,z(F.value,(a,s)=>(p(),v("div",{key:U()},[t(e(C),{class:"header"},{default:o(()=>[m("div",de,"Wizyta - "+r($(a.date)),1),t(e(E),{slot:"end",color:"info",onClick:d=>H(a.id)},{default:o(()=>[t(e(c),{icon:e(ie)},null,8,["icon"])]),_:2},1032,["onClick"]),t(e(E),{slot:"end",color:"danger",onClick:d=>A(a.id)},{default:o(()=>[t(e(c),{icon:e(D)},null,8,["icon"])]),_:2},1032,["onClick"])]),_:2},1024),t(e(C),{class:"header-1"},{default:o(()=>n[4]||(n[4]=[m("div",null,"Diagnoza",-1)])),_:1}),t(e(C),null,{default:o(()=>[m("div",re,r(a.diagnosis||"Brak danych"),1)]),_:2},1024),t(e(C),{class:"header-1"},{default:o(()=>n[5]||(n[5]=[m("div",null,"Leczenie",-1)])),_:1}),m("div",ue,[(p(!0),v(S,null,z(a.treatments,d=>(p(),v("div",ce,[d.isChecked?(p(),v("div",fe,r(d.name),1)):V("",!0),d.description?(p(),v("div",pe,r(d.description),1)):V("",!0)]))),256))])]))),128))]),_:1}),t(e(b),{horizontal:"end",vertical:"bottom",slot:"fixed"},{default:o(()=>[t(e(g),{onClick:N},{default:o(()=>[t(e(c),{icon:e(ne)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}))}});export{ve as default};
